$.fn.extend({animateCss:function(n,t){var animationEnd=function(n){var t={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"mozAnimationEnd",WebkitAnimation:"webkitAnimationEnd"};for(var e in t)if(void 0!==n.style[e])return t[e]}(document.createElement("div"));return this.addClass("animated "+n).one(animationEnd,function(){$(this).removeClass("animated "+n),"function"==typeof t&&t()}),this}}),Storage&&JSON.parse(localStorage.getItem("listitems")||"[]").forEach((n=>{if(isStorageItemExpired(n.lastUpdated))return void storageItemDelete(n.task);let t='<li class="todoitems"><button class="donebtn"><i class="fas fa-check fa-lg"></i></button><span class="items'+(1==n.finished?' completedtask" contenteditable="false">':'" contenteditable="true">')+n.task+'</span><span class="task-date" style="font-size: 0.8rem; color: gray; margin-left: 10px;">('+(n.dateAdded||"Unknown Date")+')</span><button class="delbtn"><i class="fas fa-times fa-lg"></i></button></li>';$(".ullist").prepend(t)}));let date=new Date;$("#day").text(["Sunday,","Monday,","Tuesday,","Wednesday,","Thursday,","Friday,","Saturday,"][date.getDay()]),$("#dayofweek").text(date.getDate()),$("#month").text(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][date.getMonth()]),$("#year").text(date.getFullYear());let hours=date.getHours();hours<6||hours>19?($(".bodyhead").hasClass("nightbg")||$(".bodyhead").addClass("nightbg"),$(".bodyhead").hasClass("daybg")&&$(".bodyhead").removeClass("daybg")):($(".bodyhead").hasClass("nightbg")&&$(".bodyhead").removeClass("nightbg"),$(".bodyhead").hasClass("daybg")||$(".bodyhead").addClass("daybg")),$("#listinput").keyup((function(n){13===n.keyCode&&$("#additembtn").click()})),$(document).ready((function(){$("#additembtn").prop("disabled",!0),$("#listinput").keyup((function(){let n=$("#listinput").val();$("#additembtn").prop("disabled",!n||n.length<2)})),$("#additembtn").click((function(){let n=$("#listinput").val();if(!n||n.length<2)return;let t=(new Date).toLocaleDateString(),e=[];localStorage.getItem("listitems")&&e.push(...JSON.parse(localStorage.getItem("listitems"))),e.push({finished:!1,task:n,dateAdded:t,lastUpdated:getUnixTime()}),localStorage.setItem("listitems",JSON.stringify(e)),$(".ullist").prepend('<li class="todoitems"><button class="donebtn"><i class="fas fa-check fa-lg"></i></button><span class="items" contenteditable="true">'+n+'</span><span class="task-date" style="font-size: 0.8rem; color: gray; margin-left: 10px;">('+t+')</span><button class="delbtn"><i class="fas fa-times fa-lg"></i></button></li>'),$("li:first").animateCss("fadeInDown"),$("#listinput").focus(),$("#listinput").val(""),$("#additembtn").prop("disabled",!0)}))})),$(document).on("click",".delbtn",(function(){let n=this;$(n).parent().animateCss("fadeOutLeft",(function(){storageItemDelete($(n).parent().children(".items").text()),$(n).parent().remove()}))})),$(document).on("click",".donebtn",(function(){let n=$(this).parent().children(".items");storageToggleStatus(n.text()),n.hasClass("completedtask")?(n.removeClass("completedtask").prop("contenteditable",!0),$(this).removeClass("donebtncomplete")):(n.addClass("completedtask").prop("contenteditable",!1),$(this).addClass("donebtncomplete"))}));function isStorageItemExpired(n,t=7){return getUnixTime()>n+secondsInDays(t)}function secondsInDays(n){return 86400*n}function getUnixTime(){return Math.floor(Date.now()/1e3)}function storageToggleStatus(n){let t=JSON.parse(localStorage.getItem("listitems"));t&&t.length&&(t.forEach((t=>{t.task===n&&(t.finished=!t.finished,t.lastUpdated=getUnixTime())})),localStorage.setItem("listitems",JSON.stringify(t)))}function storageItemDelete(n){let t=JSON.parse(localStorage.getItem("listitems"))||[];localStorage.setItem("listitems",JSON.stringify(t.filter((t=>t.task!==n))))}
